<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <title>롤 전적 리스트</title>
    <style>
        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: #f0f4f8;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        #matches {
            width: 100%;
            max-width: 960px;
        }

        .match-card {
            background-color: #ebf4ff;
            border-left: 6px solid #60a5fa;
            color: #1e1e1e;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .match-card.lose {
            background-color: #ffe4e6;
            border-left: 6px solid #f87171;
        }

        .match-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .champion {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-right: 12px;
        }

        .champion img {
            width: 60px;
            height: 60px;
            border-radius: 6px;
            margin-bottom: 6px;
        }

        .info {
            display: flex;
            flex-direction: column;
            gap: 4px;
            margin-right: 20px;
            min-width: 180px;
        }

        .info .game-info {
            margin-bottom: 8px;
        }

        .info .stats {
            font-size: 14px;
        }

        .items {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 10px;
        }

        .item-box {
            width: 48px;
            height: 48px;
            border-radius: 6px;
            background-color: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .item-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .kda {
            font-weight: bold;
        }

        .cs {
            font-size: 12px;
            color: #4b5563;
        }

        .summoner-spells {
            display: flex;
            gap: 4px;
            margin-top: 4px;
        }

        .summoner-spells img {
            width: 24px;
            height: 24px;
            border-radius: 4px;
        }

        .toggle-btn {
            font-size: 20px;
            background: none;
            border: none;
            color: #6b7280;
            cursor: pointer;
            transform: rotate(0deg);
            transition: transform 0.2s ease;
            margin-left: 12px;
        }

        .toggle-btn.open {
            transform: rotate(90deg);
        }

        .match-detail {
            margin-top: 10px;
            background: rgba(0, 0, 0, 0.05);
            padding: 10px;
            border-radius: 6px;
            display: none;
        }
    </style>
</head>
<body>
<div id="matches">로딩 중...</div>
<script>
    const version = '15.7.1';
    const summonerSpellURL = `https://ddragon.leagueoflegends.com/cdn/${version}/data/en_US/summoner.json`;
    const summonerSpellMap = {};
    const data = [
        {
            "gameDuration": 1722,
            "gamemode": "CLASSIC",
            "gameCreation": 1743343840095,
            "teamPosition": "JUNGLE",
            "win": false,
            "championName": "LeeSin",
            "summoner1Id": "4",
            "summoner2Id": "11",
            "kills": 1,
            "deaths": 5,
            "assists": 3,
            "kda": 0.8,
            "item0": "1029",
            "item1": "1036",
            "item2": "2055",
            "item3": "3071",
            "item4": "3047",
            "item5": "6610",
            "item6": "3340",
            "totalMinionsKilled": 8,
            "riotIdGameName": "류천이",
            "riotIdTagline": "KR1"
        },
        // 다른 매치 데이터
    ];

    const formatTime = (sec) => `${Math.floor(sec / 60)}분 ${sec % 60}초`;
    const timeAgo = (timestamp) => {
        const diff = Date.now() - timestamp;
        const mins = Math.floor(diff / 60000);
        const hrs = Math.floor(mins / 60);
        const days = Math.floor(hrs / 24);
        if (days > 0) return `${days}일 전`;
        if (hrs > 0) return `${hrs}시간 전`;
        if (mins > 0) return `${mins}분 전`;
        return '방금 전';
    };

    fetch(summonerSpellURL)
        .then(res => res.json())
        .then(spellData => {
            for (let key in spellData.data) {
                summonerSpellMap[spellData.data[key].key] = spellData.data[key].id;
            }
            renderMatches();
        });

    function renderMatches() {
        const container = document.getElementById('matches');
        container.innerHTML = '';

        data.forEach((match, index) => {
            const spell1 = summonerSpellMap[match.summoner1Id];
            const spell2 = summonerSpellMap[match.summoner2Id];
            const detailId = `detail-${index}`;

            const card = document.createElement('div');
            card.className = `match-card ${match.win ? '' : 'lose'}`;
            card.innerHTML = `
                <div class="match-header">
                    <div style="display:flex; gap:12px; flex-wrap:wrap;">
                        <div class="champion">
                            <img src="https://ddragon.leagueoflegends.com/cdn/${version}/img/champion/${match.championName}.png" alt="${match.championName}">
                            <div>${match.championName}</div>
                            <div class="summoner-spells">
                                <img src="https://ddragon.leagueoflegends.com/cdn/${version}/img/spell/${spell1}.png" alt="spell1">
                                <img src="https://ddragon.leagueoflegends.com/cdn/${version}/img/spell/${spell2}.png" alt="spell2">
                            </div>
                        </div>
                        <div class="info">
                            <div class="game-info"><strong>${match.riotIdGameName}</strong> | 포지션: ${match.teamPosition}</div>
                            <div class="stats">
                                <div class="kda">${match.kills} / ${match.deaths} / ${match.assists} (KDA: ${match.kda.toFixed(2)})</div>
                                <div class="cs">CS: ${match.totalMinionsKilled} | 시간: ${formatTime(match.gameDuration)}<br>시작: ${timeAgo(match.gameCreation)}</div>
                            </div>
                        </div>
                        <div class="items">
                            ${[match.item0, match.item1, match.item2, match.item3, match.item4, match.item5, match.item6].map(id =>
                id === "0" || id === 0 ? `<div class="item-box"></div>` : `<div class="item-box"><img src="https://ddragon.leagueoflegends.com/cdn/${version}/img/item/${id}.png" alt="item"></div>`
            ).join('')}
                        </div>
                    </div>
                    <button class="toggle-btn" data-target="${detailId}">▶</button>
                </div>
                <div class="match-detail" id="${detailId}">전적 상세 정보 영역입니다.</div>
            `;
            container.appendChild(card);
        });

        document.querySelectorAll('.toggle-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const detail = document.getElementById(btn.dataset.target);
                const isOpen = detail.style.display === 'block';
                detail.style.display = isOpen ? 'none' : 'block';
                btn.textContent = isOpen ? '▶' : '▼';
                btn.classList.toggle('open', !isOpen);
            });
        });
    }
</script>
</body>
</html>
